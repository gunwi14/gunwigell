<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>êµ°ìœ„ê³ ë“±í•™êµ ê²Œì‹œíŒ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <h2>ğŸ« êµ°ìœ„ê³ ë“±í•™êµ ê²Œì‹œíŒ</h2>
    </header>

    <main class="menu-grid">
        <a href="board.html?category=free" class="menu-card">
            <div class="menu-icon">ğŸ’¬</div>
            <div class="menu-title">ììœ ê²Œì‹œíŒ</div>
            <span class="post-count" id="cnt-free">loading...</span>
        </a>
        <a href="board.html?category=school" class="menu-card">
            <div class="menu-icon">ğŸ“š</div>
            <div class="menu-title">í•™êµ/í•™ì—…</div>
            <span class="post-count" id="cnt-school">loading...</span>
        </a>
        <a href="board.html?category=game" class="menu-card">
            <div class="menu-icon">ğŸ®</div>
            <div class="menu-title">ê²Œì„/íŒŒí‹°</div>
            <span class="post-count" id="cnt-game">loading...</span>
        </a>
        <a href="board.html?category=love" class="menu-card">
            <div class="menu-icon">ğŸ’Œ</div>
            <div class="menu-title">ì—°ì• /ê³ ë°±</div>
            <span class="post-count" id="cnt-love">loading...</span>
        </a>
        <a href="board.html?category=food" class="menu-card">
            <div class="menu-icon">ğŸ±</div>
            <div class="menu-title">ê¸‰ì‹/ë§¤ì </div>
            <span class="post-count" id="cnt-food">loading...</span>
        </a>
        <a href="board.html?category=qna" class="menu-card">
            <div class="menu-icon">â“</div>
            <div class="menu-title">ì§ˆë¬¸/ë‹µë³€</div>
            <span class="post-count" id="cnt-qna">loading...</span>
        </a>
    </main>

    <script type="module">
        // â–¼â–¼â–¼ Firebase ì„¤ì • (board.htmlê³¼ ë˜‘ê°™ì€ í‚¤ë¥¼ ë„£ìœ¼ì„¸ìš”!) â–¼â–¼â–¼
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getCountFromServer } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBYhs32HhSXtCfTHjYDWs9-i_lCj7d8UTc",
            authDomain: "gunwi-board.firebaseapp.com",
            projectId: "gunwi-board",
            storageBucket: "gunwi-board.firebasestorage.app",
            messagingSenderId: "343912898114",
            appId: "1:343912898114:web:611e8204b8a38cdd1c57db"
        };
        // â–²â–²â–² ì—¬ê¸°ê¹Œì§€ ìˆ˜ì •í•˜ì„¸ìš” â–²â–²â–²

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const categories = ['free', 'school', 'game', 'love', 'food', 'qna'];

        async function updateCounts() {
            for (const cat of categories) {
                try {
                    const coll = collection(db, `gunwi_${cat}`);
                    const snapshot = await getCountFromServer(coll);
                    document.getElementById(`cnt-${cat}`).innerText = `${snapshot.data().count}ê°œ`;
                } catch (e) {
                    console.log(e);
                    document.getElementById(`cnt-${cat}`).innerText = "-";
                }
            }
        }
        updateCounts();
    </script>
</body>
</html>
